# 1. Тема и целевая аудитория
Сервис контекстной рекламы
## MVP
1) Регистрация аккаунта
2) Создание проекта
3) Создание группы объявлений
4) Создание объялений / баннеров
5) Показ рекламы пользователям рекламной сети
6) Сбор статистики показа рекламы

## Целевая аудитория
Целевой аудиторией являются рекламодатели, использующие услуги сервиса для размещения рекламы,  
а также пользователи рекламной сети, использующие поиск, и пользователи сайтов-партнеров рекламной сети.

# 2. Расчет нагрузки
## Продуктовые метрики
* **Месячная аудитория**
Месячная аудитория РСЯ - 95.4% всех пользователей интернета в России(124 млн[1])[2]
Итого: `124 млн * 0.954 = 118.3 млн` пользователей

* **Дневная аудитория**
`65 млн`[3]

* **Средний размер хранилища пользователя**
    * ***Профиль пользователя***
    Метаинформация профиля = `4б * 3 * 100 = 1кБ`

    * ***Проекты пользователя***
    Максимум 10 проектов на пользователя
    Метаинформация проектов = `4б * 100 = 400б`
    Итого: `400б * 10 = 4кБ`

    * ***Группы объявлений***
    Максимум 50 групп объявлений
    Метаинформация групп объявлений = `4б * 100 = 400б`
    Итого: `400б * 50 = 20кБ`

    * ***Ключевые фразы***
    Максимум 200 ключевых фраз на группу[4]
    Максимум 4096 символов в ключевой фразе[4]
    Метаинформация ключевых фраз = `10 * 50 * 200 * 4096 * 4б = 1.6Гб`

    * ***Объявления***
    У компаний со стажем в среднем 300 объявлений[5]
    У Яндекс.Директ количество групп объявлений 1000, количество объявлений на группу 50[6]
    Пусть максимум 50 объявлений на группу объявлений
    Метаинформация объявлений = `50 * 50 * 4 * 4б = 4000000б = 4мБ`
    Картинки объявлений = `50 * 50 * 10мБ[6] = 25Гб`

    * ***Баннеры***
    Пусть максимум 50 баннеров на группу объявлений
    Максимальный размер баннера 150кБ[7]
    Размер хранилища баннеров = `50 * 50 * 150кБ = 375 мБ`

* **Среднее количество действий пользователя по типам в день**  

|**Группа пользователей**|**Тип действия**               |**Частота**|
|------------------------|-------------------------------|----------|
|рекламодатели           |просмотр аккаунта              |8 / день  |
|рекламодатели           |создание объявления            |3 / месяц |
|аудитория рекламной сети|поисковый запрос               |7 / день  |
|аудитория рекламной сети|переход на посадочную страницу |2 / день  |

## Технические метрики
* **Размер хранения в разбивке по типам данных**
    * ***Профили пользователей(аудитория рекламной сети)***
    Пусть 20кБ на профиль(метаинформация)
    Итого: `20кБ * 118.3млн = 2.4Тб`
    * ***Баннеры рекламодателей***
    `200000 * 375мБ = 75Тб`
    * ***Объявления рекламодателей***
    `200000 * (4мБ + 25Гб) = 800Гб(метаинформация) + 5000Тб(картинки)`
    * ***Ключевые фразы***
    `200000 * 1.6Гб = 320Тб`

* **Сетевой трафик** 
* ***Пиковое потребление в течении суток (в Гбит/с)***
Пиковое число запросов с 15.30-16.30 7% всех запросов в день (https://yandex.ru/company/researches/2014/ya_search_2014)
Можно считать что на это время приходиться и 7% всех показов рекламы (4млрд/сутки)[ссылка]
Итого: `4млрд * 0.07 = 280000000(` (показов рекламы)
Пиковый трафик: `(280M * 10Мб)/ 3600с = 6222 Гбит/с`\

* ***Суммарное потребление в течении суток (в Гбайт/сутки)***
Суммарный трафик: `4 млрд * 10Мб = 40M Гб/сутки`

* **RPS в разбивке по типам запросов (запросов в секунду)**

Пусть рекламодатель совершает 10 запросов в пределах сессии при просмотре аккаунта
Итого: `(200000 * 8 * 10) / (24 * 3600) = 185RPS`

Аудитория рекламной сети получает 4 млрд рекламы / сутки
Итого: `4млрд / (24 * 3600) = 46296.3RPS`





    



    



